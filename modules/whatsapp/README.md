# AUTOGENERATED BY CLAUDE: date=2026-02-05

# WhatsApp Bot Generator Module

**Owner:** Adithyan  
**Port:** 5001

## Overview

This module provides a modular WhatsApp Bot Generator that creates conversational flows based on configurable templates. It exposes a REST API for generating bot flows with dry-run simulation capability.

## Quick Start

```bash
# From project root
cd modules/whatsapp
python app.py

# Or using module syntax
python -m modules.whatsapp.app
```

The module is integrated into the main application.

### Access
- URL: `http://localhost:5002` (via Main App)
- API Endpoint: `/api/bots/generate` (Hosted on port 5002)

## API Endpoints

### POST /api/bots/generate

Generate a WhatsApp bot flow from a template.

**Request:**
```json
{
  "template_id": "phone_repair_basic",
  "overrides": {
    "prompt_model": "Which model is it?"
  },
  "dry_run": true
}
```

**Response:**
```json
{
  "bot_flow": {
    "id": "flow_abc123",
    "name": "Phone Repair Bot",
    "steps": [...]
  },
  "simulation": [
    {"from": "bot", "text": "Hello! Welcome to Phone Repair Service."},
    {"from": "user", "text": "My phone screen is cracked"},
    {"from": "bot", "text": "Which model is it?"}
  ]
}
```

### GET /health

Health check endpoint.

## Demo

```bash
# Using demo script
bash demo.sh

# Or manual curl
curl -X POST http://localhost:5002/api/bots/generate \
  -H "Content-Type: application/json" \
  -d '{"description": "A phone repair shop bot", "dry_run": true}'
```

## Testing

```bash
pytest tests/ -v
```

## TODO: Production Integration

1. Integrate with WhatsApp Business API
   - Implement `adapters.send_message()` with actual API calls
   - Set up webhook registration via `adapters.register_webhook()`
   
2. Add template persistence (database/file storage)

3. Implement conversation state management

4. Add authentication/authorization

5. Set up rate limiting

6. Add logging and monitoring

## File Structure

```
whatsapp/
├── README.md
├── app.py              # Flask API server
├── adapters.py         # Interface functions (TODOs for real implementation)
├── config_templates.json
├── demo.sh
└── tests/
    └── test_generate.py
```
