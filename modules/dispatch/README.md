# AUTOGENERATED BY CLAUDE: date=2026-02-05

# Dispatch Module

**Owner:** Lestlin  
**Port:** 5002

## Overview

This module handles call dispatch with Twilio-style webhook integration and failover simulation. When the primary agent is busy, it routes to AI-powered fallback.

## Quick Start

```bash
# From project root
python -m modules.dispatch.dispatcher_stub
```

The server runs on `http://localhost:5002`

## API Endpoints

### POST /dispatch/webhook

Handle incoming call dispatch with failover logic.

**Request:**
```json
{
  "call_id": "call_12345",
  "from": "+919876543210",
  "primary_busy": true,
  "metadata": {
    "region": "kerala",
    "priority": "high"
  }
}
```

**Response (primary_busy=true):**
```json
{
  "action": "fallback_ai",
  "classification": "police",
  "transcript": "User: I am being robbed",
  "forward_to": "101"
}
```

**Response (primary_busy=false):**
```json
{
  "action": "connect_primary"
}
```

## Testing

```bash
pytest tests/ -v
```

## TODO: Production Integration

1. Integrate with Twilio Voice API
   - Set up Twilio account and phone numbers
   - Configure voice webhooks
   
2. Implement real AI classification
   - Connect to LLM for call transcription analysis
   - Add emergency category routing logic

3. Add call recording and logging

4. Implement agent availability tracking

5. Set up monitoring and alerting
