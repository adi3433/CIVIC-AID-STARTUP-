<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeadGen AI | CivicAId</title>
    <link rel="icon" type="image/png" sizes="32x32" href="public/CivicLogo.png">
    <link rel="icon" type="image/png" sizes="64x64" href="public/CivicLogo.png">
    <link rel="icon" type="image/png" sizes="96x96" href="public/CivicLogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="public/CivicLogo.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'civic-dark': '#060a10',
                        'civic-surface': '#0a1018',
                        'civic-card': '#0f1824',
                    },
                    fontFamily: { sans: ['Inter','system-ui','sans-serif'] },
                }
            }
        }
    </script>
    <style>
        *,*::before,*::after{box-sizing:border-box}*{-webkit-font-smoothing:antialiased}
        html{scroll-behavior:smooth}body{background:#060a10;font-feature-settings:"cv02","cv03","cv04","cv11";overflow-x:hidden}

        #particle-canvas{position:fixed;inset:0;z-index:0;pointer-events:none}

        .ambient-blue{background:radial-gradient(ellipse 80% 50% at 50% -10%,rgba(59,130,246,0.12) 0%,rgba(59,130,246,0.04) 40%,transparent 70%)}
        .ambient-side{background:radial-gradient(ellipse 40% 60% at 100% 30%,rgba(99,102,241,0.07) 0%,transparent 70%)}
        .ambient-bottom{background:radial-gradient(ellipse 60% 40% at 20% 100%,rgba(14,165,233,0.05) 0%,transparent 70%)}

        .glass-nav{background:rgba(6,10,16,0.75);backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-bottom:1px solid rgba(59,130,246,0.08)}

        .card-glass{
            background:linear-gradient(160deg,rgba(15,24,36,0.95) 0%,rgba(10,16,24,0.98) 100%);
            border:1px solid rgba(59,130,246,0.1);
            box-shadow:0 0 0 1px rgba(59,130,246,0.03) inset,0 4px 24px rgba(0,0,0,0.4),0 0 80px rgba(59,130,246,0.04);
            transition:transform 0.4s cubic-bezier(.22,1,.36,1),box-shadow 0.4s ease;
        }

        .input-glow:focus{border-color:rgba(59,130,246,0.5)!important;box-shadow:0 0 0 3px rgba(59,130,246,0.1),0 0 20px rgba(59,130,246,0.08)}

        .btn-blue{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 50%,#1d4ed8 100%);box-shadow:0 2px 12px rgba(59,130,246,0.3),0 0 40px rgba(59,130,246,0.08);transition:all 0.3s ease}
        .btn-blue:hover{box-shadow:0 4px 20px rgba(59,130,246,0.5),0 0 60px rgba(59,130,246,0.15);transform:translateY(-2px)}
        .btn-blue:disabled{opacity:0.5;cursor:not-allowed;transform:none}

        .markdown-content h1,.markdown-content h2,.markdown-content h3{font-weight:700;margin-top:1.25rem;margin-bottom:0.5rem}
        .markdown-content h1{font-size:1.375rem}.markdown-content h2{font-size:1.125rem}.markdown-content h3{font-size:1rem}
        .markdown-content p{margin-bottom:0.625rem;line-height:1.6}
        .markdown-content ul,.markdown-content ol{margin-left:1.25rem;margin-bottom:0.625rem;list-style:disc}
        .markdown-content code{background:rgba(255,255,255,0.08);padding:0.15rem 0.35rem;border-radius:4px;font-size:0.875em}
        .markdown-content pre{background:rgba(0,0,0,0.3);padding:0.75rem;border-radius:8px;overflow-x:auto;margin-bottom:0.75rem}

        .typing-indicator{display:flex;gap:4px;padding:8px 0}
        .typing-indicator span{width:8px;height:8px;background:#3b82f6;border-radius:50%;animation:bounce 1.4s ease-in-out infinite}
        .typing-indicator span:nth-child(2){animation-delay:0.2s}
        .typing-indicator span:nth-child(3){animation-delay:0.4s}
        @keyframes bounce{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-8px)}}

        .orbit-ring{position:absolute;border-radius:50%;border:1px solid rgba(59,130,246,0.06)}
        .orbit-ring-1{width:300px;height:300px;top:-60px;right:-80px;animation:orbitSpin 35s linear infinite}
        .orbit-ring-2{width:200px;height:200px;bottom:-40px;left:-60px;animation:orbitSpin 25s linear infinite reverse}
        @keyframes orbitSpin{to{transform:rotate(360deg)}}

        .radar-ring{position:absolute;border-radius:50%;border:1px solid rgba(59,130,246,0.15);animation:radarPulse 3s ease-out infinite}
        .radar-ring-2{animation-delay:1s}.radar-ring-3{animation-delay:2s}
        @keyframes radarPulse{0%{transform:scale(0.3);opacity:0.8}100%{transform:scale(1.2);opacity:0}}

        .data-grid{animation:dataFloat 6s ease-in-out infinite}
        @keyframes dataFloat{0%,100%{transform:translateY(0) rotateX(5deg)}50%{transform:translateY(-8px) rotateX(-3deg)}}

        .reveal{opacity:0;transform:translateY(24px)}

        .quick-btn{background:rgba(15,24,36,0.8);border:1px solid rgba(59,130,246,0.1);transition:all 0.3s ease}
        .quick-btn:hover{border-color:rgba(59,130,246,0.4);transform:translateY(-3px);box-shadow:0 8px 24px rgba(59,130,246,0.1)}
    </style>
</head>
<body class="text-white font-sans leading-relaxed min-h-screen">
    <canvas id="particle-canvas"></canvas>
    <div class="fixed inset-0 pointer-events-none z-[1] ambient-blue"></div>
    <div class="fixed inset-0 pointer-events-none z-[1] ambient-side"></div>
    <div class="fixed inset-0 pointer-events-none z-[1] ambient-bottom"></div>

    <header class="fixed top-0 left-0 right-0 z-50 glass-nav">
        <nav class="flex items-center justify-between h-16 px-6 lg:px-10 max-w-[1280px] mx-auto">
            <a href="landing.html" class="flex items-center gap-2.5 no-underline shrink-0 group">
                <img src="public/CivicLogo.png" alt="CivicAId" class="w-8 h-8 object-contain transition-transform group-hover:scale-110">
                <span class="text-[0.9375rem] font-semibold text-white">CivicAId</span>
            </a>
            <div class="flex items-center gap-6">
                <a href="landing.html" class="text-white/50 text-sm font-medium hover:text-white transition-colors no-underline">Home</a>
                <a href="https://github.com/adi3433/CIVIC-AID-STARTUP-" target="_blank" class="text-white/50 text-sm font-medium hover:text-white transition-colors no-underline">GitHub</a>
                <button onclick="toggleInfo()" class="text-white/40 hover:text-white transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                </button>
            </div>
        </nav>
    </header>

    <main class="relative z-10 pt-28 pb-20">
        <div class="max-w-[1000px] mx-auto px-6">
            <!-- Hero -->
            <section class="grid grid-cols-1 lg:grid-cols-5 gap-10 items-center mb-16">
                <div class="lg:col-span-3">
                    <div class="reveal inline-flex items-center gap-2 px-3 py-1.5 rounded-full mb-6" style="background:rgba(59,130,246,0.06);border:1px solid rgba(59,130,246,0.12);">
                        <span class="w-1.5 h-1.5 rounded-full bg-blue-500 animate-pulse"></span>
                        <span class="text-[0.6875rem] font-medium tracking-wide text-blue-400/80 uppercase">AI Investigation Assistant</span>
                    </div>
                    <h1 class="reveal text-[clamp(2rem,4.5vw,3.25rem)] font-extrabold tracking-[-0.035em] leading-[1.1] text-white mb-5">
                        LeadGen<br><span class="bg-gradient-to-r from-blue-400 via-cyan-400 to-indigo-400 bg-clip-text text-transparent">AI</span>
                    </h1>
                    <p class="reveal text-base text-white/50 leading-relaxed max-w-[440px]">AI-powered lead qualification and case analysis. Ask questions, analyze cases, or get intelligent recommendations.</p>
                </div>
                <!-- Radar Visual -->
                <div class="lg:col-span-2 reveal flex justify-center relative">
                    <div class="relative w-[220px] h-[220px]">
                        <div class="orbit-ring orbit-ring-1"></div>
                        <div class="orbit-ring orbit-ring-2"></div>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="relative w-[160px] h-[160px]">
                                <div class="radar-ring absolute inset-0 border-blue-500/15 rounded-full"></div>
                                <div class="radar-ring radar-ring-2 absolute inset-0 border-blue-500/10 rounded-full"></div>
                                <div class="radar-ring radar-ring-3 absolute inset-0 border-blue-500/5 rounded-full"></div>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <div class="w-4 h-4 rounded-full bg-blue-500 shadow-[0_0_30px_rgba(59,130,246,0.5)]"></div>
                                </div>
                                <!-- Data nodes -->
                                <div class="absolute top-2 left-1/2 -translate-x-1/2 w-2 h-2 rounded-full bg-cyan-400/60" style="animation:bounce 2s ease-in-out infinite"></div>
                                <div class="absolute bottom-4 right-4 w-2 h-2 rounded-full bg-indigo-400/60" style="animation:bounce 2.5s ease-in-out infinite 0.5s"></div>
                                <div class="absolute top-1/3 left-2 w-1.5 h-1.5 rounded-full bg-blue-300/50" style="animation:bounce 3s ease-in-out infinite 1s"></div>
                            </div>
                        </div>
                        <div class="absolute -top-4 right-0 text-3xl" style="animation:dataFloat 4s ease-in-out infinite;filter:drop-shadow(0 0 15px rgba(59,130,246,0.3))">üéØ</div>
                    </div>
                </div>
            </section>

            <!-- Chat Container -->
            <div class="card-glass rounded-2xl overflow-hidden" id="chat-card">
                <div class="p-6 overflow-y-auto" style="min-height:400px;max-height:600px" id="messages">
                    <div id="welcome-screen" class="text-center py-12">
                        <div class="text-6xl mb-6" style="filter:drop-shadow(0 0 20px rgba(59,130,246,0.3))">üéØ</div>
                        <h2 class="text-2xl font-bold mb-4">Welcome to LeadGen AI</h2>
                        <p class="text-white/50 mb-8 max-w-md mx-auto">Your intelligent investigation assistant powered by Llama 3.3. Ask questions, analyze cases, or get recommendations.</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto">
                            <button onclick="handleQuickPrompt('Deepfake Fraud Investigation')" class="quick-btn rounded-xl p-4 text-left">
                                <div class="text-2xl mb-2">üïµÔ∏è</div>
                                <div class="font-semibold text-sm mb-1">Deepfake Fraud</div>
                                <div class="text-xs text-white/40">Investigation process</div>
                            </button>
                            <button onclick="handleQuickPrompt('Phishing Analysis')" class="quick-btn rounded-xl p-4 text-left">
                                <div class="text-2xl mb-2">üé£</div>
                                <div class="font-semibold text-sm mb-1">Phishing Analysis</div>
                                <div class="text-xs text-white/40">Campaign detection</div>
                            </button>
                            <button onclick="handleQuickPrompt('Cryptocurrency Scam')" class="quick-btn rounded-xl p-4 text-left">
                                <div class="text-2xl mb-2">‚Çø</div>
                                <div class="font-semibold text-sm mb-1">Crypto Scam</div>
                                <div class="text-xs text-white/40">Blockchain tracing</div>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="border-t border-white/[0.06] p-5">
                    <div class="flex gap-3" id="input-wrapper">
                        <input type="text" id="lead-input" placeholder="Describe your case or ask a question..."
                            class="input-glow flex-1 bg-white/[0.03] border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none transition-all">
                        <button id="send-btn" onclick="sendMessage()" disabled
                            class="btn-blue disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-6 py-3 rounded-xl flex items-center gap-2">
                            <span>Send</span>
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                        </button>
                    </div>
                    <div class="text-xs text-white/30 mt-2 text-center">Powered by Fireworks AI &bull; Llama 3.3 70B Instruct</div>
                </div>
            </div>
        </div>
    </main>

    <footer class="relative z-10 text-center py-8 text-white/30 text-sm border-t border-white/[0.04]">
        <p>&copy; 2026 CivicAId. AI-Powered Investigation Platform.</p>
    </footer>

    <!-- Info Modal -->
    <div id="info-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center p-6" onclick="toggleInfo()">
        <div class="card-glass rounded-2xl p-8 max-w-md" onclick="event.stopPropagation()">
            <h3 class="text-xl font-bold mb-4">About LeadGen AI</h3>
            <p class="text-white/60 text-sm mb-4">LeadGen AI uses Fireworks AI's Llama 3.3 70B model to analyze investigation cases and provide actionable recommendations.</p>
            <p class="text-white/60 text-sm mb-4">To use this feature, you'll need a Fireworks AI API key (free tier available).</p>
            <button onclick="toggleInfo()" class="w-full btn-blue text-white font-semibold py-2 px-4 rounded-xl">Got it</button>
        </div>
    </div>

    <script>
        // ‚îÄ‚îÄ Particle System (Blue) ‚îÄ‚îÄ
        (function(){const c=document.getElementById('particle-canvas'),x=c.getContext('2d');let p=[];const C=['rgba(59,130,246,','rgba(99,102,241,','rgba(14,165,233,','rgba(96,165,250,'];function r(){c.width=window.innerWidth;c.height=window.innerHeight}window.addEventListener('resize',r);r();class P{constructor(){this.reset()}reset(){this.x=Math.random()*c.width;this.y=Math.random()*c.height;this.s=Math.random()*2.5+0.5;this.sx=(Math.random()-0.5)*0.35;this.sy=(Math.random()-0.5)*0.25;this.c=C[Math.floor(Math.random()*C.length)];this.o=Math.random()*0.35+0.08;this.p=Math.random()*Math.PI*2;this.ps=Math.random()*0.02+0.005}update(){this.x+=this.sx;this.y+=this.sy;this.p+=this.ps;if(this.x<0||this.x>c.width||this.y<0||this.y>c.height)this.reset()}draw(){const o=this.o*(0.6+Math.sin(this.p)*0.4);x.beginPath();x.arc(this.x,this.y,this.s,0,Math.PI*2);x.fillStyle=this.c+o+')';x.fill()}}for(let i=0;i<70;i++)p.push(new P());function d(){for(let i=0;i<p.length;i++)for(let j=i+1;j<p.length;j++){const dx=p[i].x-p[j].x,dy=p[i].y-p[j].y,di=Math.sqrt(dx*dx+dy*dy);if(di<140){x.beginPath();x.strokeStyle=`rgba(59,130,246,${0.05*(1-di/140)})`;x.lineWidth=0.5;x.moveTo(p[i].x,p[i].y);x.lineTo(p[j].x,p[j].y);x.stroke()}}}function l(){x.clearRect(0,0,c.width,c.height);p.forEach(i=>{i.update();i.draw()});d();requestAnimationFrame(l)}l()})();

        // 3D tilt on chat card
        const chatCard=document.getElementById('chat-card');
        if(chatCard){chatCard.addEventListener('mousemove',e=>{const r=chatCard.getBoundingClientRect(),x=(e.clientX-r.left)/r.width-0.5,y=(e.clientY-r.top)/r.height-0.5;chatCard.style.transform=`perspective(1500px) rotateY(${x*4}deg) rotateX(${-y*3}deg)`});chatCard.addEventListener('mouseleave',()=>{chatCard.style.transform='perspective(1500px) rotateY(0deg) rotateX(0deg)'})}

        const {animate, inView} = Motion;

        mermaid.initialize({ startOnLoad: true, theme: 'dark', securityLevel: 'loose' });

        const messagesContainer = document.getElementById('messages');
        const welcomeScreen = document.getElementById('welcome-screen');
        const leadInput = document.getElementById('lead-input');
        const sendBtn = document.getElementById('send-btn');
        let conversationHistory = [];

        leadInput.addEventListener('input', () => { sendBtn.disabled = !leadInput.value.trim(); });
        leadInput.addEventListener('keypress', (e) => { if (e.key === 'Enter' && !sendBtn.disabled) sendMessage(); });

        function toggleInfo() { document.getElementById('info-modal').classList.toggle('hidden'); }

        async function handleQuickPrompt(type) {
            const map = { 'Deepfake Fraud Investigation': 'How do you approach a deepfake fraud case?', 'Phishing Analysis': "What's the process for analyzing a phishing campaign?", 'Cryptocurrency Scam': 'How to investigate a cryptocurrency scam?' };
            leadInput.value = map[type]; await sendMessage();
        }

        function addMessage(role, content) {
            if (welcomeScreen.style.display !== 'none') welcomeScreen.style.display = 'none';
            const msgDiv = document.createElement('div');
            msgDiv.className = `flex gap-3 mb-4 ${role === 'user' ? 'justify-end' : ''}`;
            const avatar = document.createElement('div');
            avatar.className = `w-8 h-8 rounded-full flex items-center justify-center ${role === 'user' ? 'bg-blue-500/20 order-2' : 'bg-cyan-500/20'}`;
            avatar.innerHTML = role === 'user' ? '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>' : '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>';
            const contentDiv = document.createElement('div');
            contentDiv.className = `${role === 'user' ? 'bg-blue-500/15 order-1' : 'bg-white/[0.03]'} rounded-2xl px-4 py-3 max-w-[80%] markdown-content`;
            if (content === null) { contentDiv.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>'; msgDiv.id = 'loading-msg'; }
            else { if (role === 'ai') { contentDiv.innerHTML = marked.parse(content); requestAnimationFrame(() => { mermaid.init(undefined, contentDiv.querySelectorAll('.language-mermaid')); }); } else contentDiv.textContent = content; }
            msgDiv.appendChild(avatar); msgDiv.appendChild(contentDiv);
            messagesContainer.appendChild(msgDiv); messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function removeLoadingMessage() { const l = document.getElementById('loading-msg'); if (l) l.remove(); }

        async function sendMessage() {
            const text = leadInput.value.trim(); if (!text) return;
            leadInput.value = ''; sendBtn.disabled = true;
            addMessage('user', text); conversationHistory.push({ role: 'user', content: text });
            addMessage('ai', null);
            try {
                let API_KEY = localStorage.getItem('civicaid_fireworks_api_key');
                if (!API_KEY || API_KEY === 'YOUR_FIREWORKS_API_KEY') {
                    API_KEY = prompt("Please enter your Fireworks AI API Key (starts with fw_...):");
                    if (API_KEY) localStorage.setItem('civicaid_fireworks_api_key', API_KEY);
                    else throw new Error("API Key is required.");
                }
                const response = await fetch('https://api.fireworks.ai/inference/v1/chat/completions', {
                    method: 'POST', headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${API_KEY}` },
                    body: JSON.stringify({ model: "accounts/fireworks/models/llama-v3p3-70b-instruct", messages: [{ role: "system", content: "You are an expert investigative assistant for CivicAid. Analyze cases with precision." }, { role: "user", content: `Analyze the following case and provide actionable recommendations:\n\n${text}` }], temperature: 0.6 })
                });
                if (!response.ok) { if (response.status === 429) throw new Error("Rate Limited. Please wait."); throw new Error(`API Error: ${response.status}`); }
                const data = await response.json(); const aiText = data.choices?.[0]?.message?.content || "I couldn't generate a response.";
                removeLoadingMessage(); addMessage('ai', aiText); conversationHistory.push({ role: 'model', content: aiText });
            } catch (error) {
                console.error("API Error:", error); removeLoadingMessage();
                let errorMsg = `Error: ${error.message}`;
                if (error.message.includes('401')) { errorMsg = "Authentication Failed: Invalid API Key."; localStorage.removeItem('civicaid_fireworks_api_key'); }
                else if (error.message.includes('429')) errorMsg = "System Busy: Please wait 30 seconds.";
                addMessage('ai', errorMsg);
            }
        }

        // ‚îÄ‚îÄ Reveal ‚îÄ‚îÄ
        window.addEventListener('load', () => {
            document.querySelectorAll('.reveal').forEach((el, i) => {
                inView(el, () => { animate(el, { opacity: [0, 1], y: [24, 0] }, { duration: 0.85, delay: 0.1 * (i % 6), easing: [0.22, 1, 0.36, 1] }); }, { amount: 0.15 });
            });
        });
    </script>
</body>
</html>