<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Create your WhatsApp bot in seconds - CivicAid">
    <title>Create Your WhatsApp Bot | CivicAid</title>
    <link rel="icon" type="image/png" sizes="32x32" href="public/CivicLogo.png">
    <link rel="icon" type="image/png" sizes="64x64" href="public/CivicLogo.png">
    <link rel="icon" type="image/png" sizes="96x96" href="public/CivicLogo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="public/CivicLogo.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Motion One -->
    <script src="https://cdn.jsdelivr.net/npm/motion@11.11.17/dist/motion.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'civic-dark': '#0a0e1a',
                        'civic-surface': '#0f1420',
                        'civic-card': '#141b2d',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    backdropBlur: {
                        xs: '2px',
                    },
                    keyframes: {
                        glow: {
                            '0%, 100%': { boxShadow: '0 0 20px rgba(31, 163, 163, 0.5)' },
                            '50%': { boxShadow: '0 0 30px rgba(31, 163, 163, 0.8)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                    },
                    animation: {
                        glow: 'glow 2s ease-in-out infinite',
                        float: 'float 3s ease-in-out infinite',
                    }
                }
            }
        }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Glassmorphism effect */
        .glass-bg {
            background: rgba(15, 20, 32, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Icon glow effect */
        .icon-glow-teal {
            background: rgba(31, 163, 163, 0.1);
            box-shadow: 0 0 20px rgba(31, 163, 163, 0.3);
        }

        /* Checkbox styling */
        .checkbox-item {
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-item:hover {
            border-color: rgba(31, 163, 163, 0.5) !important;
        }

        .checkbox-item.selected {
            border-color: #1FA3A3 !important;
            background: rgba(31, 163, 163, 0.1) !important;
        }

        .checkbox-item input[type="checkbox"] {
            display: none;
        }

        .checkbox-item .checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .checkbox-item.selected .checkmark {
            background: #1FA3A3;
            border-color: #1FA3A3;
        }

        .checkbox-item.selected .checkmark::after {
            content: '✓';
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        /* Loading spinner */
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .spinner {
            animation: spin 1s linear infinite;
        }
    </style>
</head>

<body class="bg-civic-dark text-white font-sans leading-relaxed min-h-screen overflow-x-hidden">
    <!-- Fixed Top Spotlight Effect -->
    <div class="fixed top-0 left-0 w-full h-[400px] pointer-events-none z-0" style="background: linear-gradient(180deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.18) 10%, rgba(255, 255, 255, 0.12) 20%, rgba(255, 255, 255, 0.08) 35%, rgba(255, 255, 255, 0.04) 55%, rgba(255, 255, 255, 0.01) 75%, transparent 100%); filter: blur(60px);"></div>
    
    <!-- Right Side Spotlight -->
    <div class="fixed top-[30%] right-[-10%] w-[800px] h-[800px] pointer-events-none z-0" style="background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.15) 15%, rgba(255, 255, 255, 0.1) 30%, rgba(255, 255, 255, 0.05) 50%, rgba(255, 255, 255, 0.02) 70%, transparent 100%); filter: blur(80px);"></div>

    <!-- Header - Premium Glassmorphism -->
    <header class="fixed top-0 left-0 right-0 z-50 glass-bg backdrop-blur-xl border-b border-white/[0.06]">
        <nav class="flex justify-between items-center py-4 px-10 max-w-[1400px] mx-auto">
            <a href="landing.html" class="flex items-center gap-3 text-lg font-semibold text-white no-underline group">
                <img src="public/CivicLogo.png" alt="CivicAId Logo" class="w-10 h-10 object-contain transition-transform group-hover:scale-110">
                <span class="group-hover:text-blue-400 transition-colors">CivicAId</span>
            </a>
            <div class="flex items-center gap-8">
                <a href="landing.html" class="text-white/70 no-underline text-sm font-medium hover:text-white transition-colors">Home</a>
                <a href="demo_whatsapp.html" class="text-white/70 no-underline text-sm font-medium hover:text-white transition-colors">Demo</a>
            </div>
        </nav>
    </header>

    <main class="relative z-10 pt-36 pb-24">
        <div class="max-w-[900px] mx-auto px-10">
            <!-- Page Header -->
            <div class="text-center mb-12 fade-in-card">
                <span class="inline-block text-xs font-medium text-white/60 bg-white/5 border border-white/[0.08] px-3 py-1.5 rounded tracking-wide mb-4">EASY SETUP</span>
                <h1 class="text-5xl font-bold leading-tight text-white mb-5 tracking-tight">Create Your WhatsApp Bot</h1>
                <p class="text-white/60 text-base leading-relaxed">Fill in your business details and select what your bot should do</p>
            </div>

            <!-- Form Card -->
            <div class="bg-civic-surface/80 backdrop-blur-sm border border-white/[0.06] rounded-2xl p-8 hover:border-white/[0.12] transition-all fade-in-card">
                <!-- Form Section -->
                <div id="form-section">
                    <!-- Business Info -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-[#1FA3A3] mb-6 flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                            Business Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div>
                                <label class="block text-sm font-medium text-white/70 mb-2">Business Name <span class="text-red-400">*</span></label>
                                <input type="text" id="business-name" placeholder="e.g., PhoneFix Store" class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-white/70 mb-2">Business Type</label>
                                <input type="text" id="business-type" placeholder="e.g., Phone Repair, Restaurant" class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-white/70 mb-2">Contact Number</label>
                                <input type="tel" id="contact-phone" placeholder="e.g., 9876543210" class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-white/70 mb-2">Business Hours</label>
                                <input type="text" id="business-hours" placeholder="e.g., 9am - 7pm, Mon-Sat" class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-white/70 mb-2">Location/Address</label>
                                <input type="text" id="business-location" placeholder="e.g., MG Road, Mumbai" class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors">
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-white/70 mb-2">Brief Description (Optional)</label>
                                <textarea id="business-description" rows="3" placeholder="Tell us about your business..." class="w-full px-4 py-3 bg-civic-dark border border-white/[0.08] rounded-lg text-white text-sm placeholder-white/40 focus:outline-none focus:border-[#1FA3A3] transition-colors resize-none"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Bot Capabilities -->
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-[#1FA3A3] mb-6 flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                            What should your bot do?
                        </h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="appointments">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                    Book Appointments
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="price_quotes">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    Price Quotes
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="orders">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
                                    Take Orders
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="order_tracking">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
                                    Order Tracking
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="reservations">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                                    Table Reservations
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="menu">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                                    Show Menu/Catalog
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="faq">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                    Answer FAQs
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="complaints">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                                    Handle Complaints
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="support">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                                    Customer Support
                                </span>
                            </label>
                            <label class="checkbox-item flex items-center gap-3 bg-civic-dark border border-white/[0.08] rounded-lg p-3" onclick="toggleCheckbox(this)">
                                <input type="checkbox" value="returns">
                                <span class="checkmark"></span>
                                <span class="flex items-center gap-2 text-sm text-white/80">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg>
                                    Process Returns
                                </span>
                            </label>
                        </div>
                    </div>

                    <button id="create-btn" onclick="createBot()" class="w-full px-6 py-3.5 rounded-lg text-sm font-semibold transition-all hover:-translate-y-0.5 flex items-center justify-center gap-2" style="background-color: #1FA3A3; color: white;" onmouseover="this.style.backgroundColor='#1a8e8e'; this.style.boxShadow='0 10px 15px -3px rgba(31, 163, 163, 0.5)'" onmouseout="this.style.backgroundColor='#1FA3A3'; this.style.boxShadow=''" onmousedown="this.style.backgroundColor='#177878'" onmouseup="this.style.backgroundColor='#1FA3A3'">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        Create My Bot
                    </button>
                </div>

                <!-- Loading State -->
                <div class="hidden text-center py-16" id="loading-section">
                    <div class="w-12 h-12 border-4 border-white/20 border-t-[#1FA3A3] rounded-full spinner mx-auto mb-4"></div>
                    <h3 class="text-xl font-semibold text-white mb-2">Creating Your Bot...</h3>
                    <p class="text-white/60 text-sm">Setting up your custom WhatsApp bot</p>
                </div>

                <!-- Result Section -->
                <div class="hidden" id="result-section">
                    <div class="text-center mb-8">
                        <div class="w-16 h-16 mx-auto mb-4 icon-glow-teal rounded-full flex items-center justify-center">
                            <svg class="w-8 h-8 text-[#1FA3A3]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        </div>
                        <h2 class="text-2xl font-bold text-white mb-2">Your Bot is Ready!</h2>
                        <p class="text-white/60">Share the link below with your customers</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-civic-dark border border-white/[0.06] rounded-lg p-4">
                            <h4 class="text-xs font-medium text-white/50 uppercase mb-2">Bot Name</h4>
                            <div class="text-base font-semibold text-white" id="result-bot-name">-</div>
                        </div>
                        <div class="bg-civic-dark border border-white/[0.06] rounded-lg p-4">
                            <h4 class="text-xs font-medium text-white/50 uppercase mb-2">Business ID</h4>
                            <div class="text-base font-semibold text-white" id="result-business-id">-</div>
                        </div>
                        <div class="bg-civic-dark border border-white/[0.06] rounded-lg p-4 md:col-span-2">
                            <h4 class="text-xs font-medium text-white/50 uppercase mb-2">Capabilities</h4>
                            <div class="flex flex-wrap gap-2" id="result-capabilities"></div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-r from-[#1FA3A3]/20 to-[#1FA3A3]/10 border border-[#1FA3A3]/30 rounded-xl p-6 text-center">
                        <h3 class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
                            Share This Link
                        </h3>
                        <div class="flex items-center gap-2 bg-civic-dark border border-white/[0.08] rounded-lg p-3 mb-4">
                            <input type="text" id="whatsapp-link" readonly class="flex-1 bg-transparent border-none text-white text-sm focus:outline-none">
                            <button onclick="copyLink()" class="px-4 py-2 bg-[#1FA3A3] hover:bg-[#1a8e8e] text-white text-sm font-semibold rounded-lg transition-colors">Copy</button>
                        </div>
                        <p class="text-white/50 text-xs mb-3">Or scan the QR code:</p>
                        <div class="inline-block bg-white p-3 rounded-lg">
                            <img id="qr-code" src="" alt="QR Code" width="140" height="140">
                        </div>
                    </div>

                    <button onclick="createAnother()" class="w-full mt-6 px-6 py-3 bg-transparent border-2 border-white/20 hover:border-white/40 text-white text-sm font-semibold rounded-lg transition-colors">
                        ← Create Another Bot
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="py-10 border-t border-white/[0.06] text-center relative z-10">
        <div class="max-w-[1200px] mx-auto px-10">
            <div class="text-lg font-semibold text-white mb-2">CivicAid</div>
            <p class="text-white/40 text-sm">&copy; 2026 CivicAid. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Use relative path for Vercel deployment
        const API_BASE = '';

        function toggleCheckbox(item) {
            const checkbox = item.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            item.classList.toggle('selected', checkbox.checked);
        }

        function getSelectedCapabilities() {
            const checkboxes = document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked');
            return Array.from(checkboxes).map(cb => cb.value);
        }

        function getCapabilityLabels() {
            const labels = {
                'appointments': 'Book Appointments',
                'price_quotes': 'Price Quotes',
                'orders': 'Take Orders',
                'order_tracking': 'Order Tracking',
                'reservations': 'Table Reservations',
                'menu': 'Show Menu/Catalog',
                'faq': 'Answer FAQs',
                'complaints': 'Handle Complaints',
                'support': 'Customer Support',
                'returns': 'Process Returns'
            };
            return getSelectedCapabilities().map(cap => labels[cap] || cap);
        }

        async function createBot() {
            const businessName = document.getElementById('business-name').value.trim();

            if (!businessName) {
                alert('Please enter your business name');
                return;
            }

            const capabilities = getSelectedCapabilities();
            if (capabilities.length === 0) {
                alert('Please select at least one capability for your bot');
                return;
            }

            // Collect form data
            const formData = {
                business_name: businessName,
                business_type: document.getElementById('business-type').value.trim(),
                contact_phone: document.getElementById('contact-phone').value.trim(),
                business_hours: document.getElementById('business-hours').value.trim(),
                location: document.getElementById('business-location').value.trim(),
                description: document.getElementById('business-description').value.trim(),
                capabilities: capabilities
            };

            // Show loading
            document.getElementById('form-section').classList.add('hidden');
            document.getElementById('loading-section').classList.remove('hidden');
            document.getElementById('result-section').classList.add('hidden');

            try {
                // Simulate network delay
                await new Promise(r => setTimeout(r, 2000));

                const mockBusinessId = formData.business_name.toLowerCase().replace(/[^a-z0-9]/g, '_') + '_' + Math.floor(Math.random() * 1000);
                const mockLink = `https://wa.me/15550123456?text=Start_${mockBusinessId}`;

                // Redirect to success page
                setTimeout(() => {
                    const params = new URLSearchParams({
                        business_id: mockBusinessId,
                        bot_name: formData.business_name + " Bot",
                        link: mockLink
                    });
                    window.location.href = `bot_success.html?${params.toString()}`;
                }, 1000);

            } catch (error) {
                alert('Error: ' + error.message);
                document.getElementById('form-section').classList.remove('hidden');
                document.getElementById('loading-section').classList.add('hidden');
            }
        }

        function showResult(data) {
            document.getElementById('result-bot-name').textContent = data.bot_name;
            document.getElementById('result-business-id').textContent = data.business_id;
            document.getElementById('whatsapp-link').value = data.whatsapp_link;
            document.getElementById('qr-code').src = data.qr_code_url;

            // Render capabilities
            const capContainer = document.getElementById('result-capabilities');
            capContainer.innerHTML = '';
            (data.capabilities || getCapabilityLabels()).forEach(cap => {
                const tag = document.createElement('span');
                tag.className = 'px-3 py-1.5 bg-[#1FA3A3]/20 text-[#1FA3A3] text-xs font-medium rounded-full';
                tag.textContent = cap;
                capContainer.appendChild(tag);
            });

            document.getElementById('loading-section').classList.add('hidden');
            document.getElementById('result-section').classList.remove('hidden');
        }

        function copyLink() {
            const input = document.getElementById('whatsapp-link');
            input.select();
            document.execCommand('copy');

            const btn = event.target;
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 2000);
        }

        function createAnother() {
            document.getElementById('form-section').classList.remove('hidden');
            document.getElementById('result-section').classList.add('hidden');

            // Reset form
            document.getElementById('business-name').value = '';
            document.getElementById('business-type').value = '';
            document.getElementById('contact-phone').value = '';
            document.getElementById('business-hours').value = '';
            document.getElementById('business-location').value = '';
            document.getElementById('business-description').value = '';

            // Uncheck all checkboxes
            document.querySelectorAll('.checkbox-item').forEach(item => {
                item.classList.remove('selected');
                item.querySelector('input[type="checkbox"]').checked = false;
            });
        }

        // Initialize Motion.js animations
        window.addEventListener('load', () => {
            const { animate } = Motion;
            const consistentEase = "linear";
            const slowDuration = 1.5;

            // Animate page header
            animate(
                "main > div > div:first-child",
                { opacity: [0, 1], y: [30, 0], scale: [0.98, 1] },
                { duration: slowDuration, easing: consistentEase }
            );

            // Animate form card
            animate(
                "main > div > div:nth-child(2)",
                { opacity: [0, 1], y: [30, 0], scale: [0.98, 1] },
                { duration: slowDuration, delay: 0.3, easing: consistentEase }
            );
        });
    </script>
</body>

</html>
